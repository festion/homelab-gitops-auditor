# WikiJS Agent Monitoring System Configuration
# Copy this file to .env and adjust the values for your environment

# ============================================================================
# BASIC CONFIGURATION
# ============================================================================

# Environment (development, production, test)
NODE_ENV=production

# Data storage path
WIKIJS_MONITOR_DATA_PATH=/home/dev/workspace/wikijs-monitoring/data

# Dashboard configuration
DASHBOARD_HOST=0.0.0.0
DASHBOARD_PORT=3002
DASHBOARD_UPDATE_INTERVAL=5000

# ============================================================================
# WIKIJS AGENT CONFIGURATION  
# ============================================================================

# WikiJS Agent URL for health checks
WIKIJS_AGENT_URL=http://localhost:3001/health

# File system paths to monitor
REPOS_PATH=/repos
WORKSPACE_PATH=/home/dev/workspace

# ============================================================================
# LOGGING CONFIGURATION
# ============================================================================

# Log level (ERROR, WARN, INFO, DEBUG, TRACE)
LOG_LEVEL=INFO

# Console logging
LOG_CONSOLE_ENABLED=true
LOG_CONSOLE_LEVEL=INFO
LOG_COLORIZE=true

# File logging
LOG_FILE_ENABLED=true
LOG_ROTATION=daily
LOG_RETENTION=30
LOG_COMPRESSION=true
LOG_MAX_SIZE=100MB

# Syslog integration (optional)
SYSLOG_ENABLED=false
SYSLOG_HOST=localhost
SYSLOG_PORT=514

# Elasticsearch integration (optional)
ELASTICSEARCH_ENABLED=false
ELASTICSEARCH_URL=http://localhost:9200
ELASTICSEARCH_INDEX=wikijs-agent-logs

# ============================================================================
# EMAIL ALERTING CONFIGURATION
# ============================================================================

# Enable email notifications
EMAIL_ENABLED=false

# SMTP configuration
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password

# Email recipients (comma-separated)
EMAIL_RECIPIENTS=admin@homelab.local,ops@homelab.local

# ============================================================================
# SLACK ALERTING CONFIGURATION
# ============================================================================

# Enable Slack notifications
SLACK_ENABLED=false

# Slack webhook URL
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK

# Slack channel for alerts
SLACK_CHANNEL=#homelab-alerts

# Users to mention in alerts (comma-separated)
SLACK_MENTIONS=@admin,@ops

# ============================================================================
# HOME ASSISTANT INTEGRATION
# ============================================================================

# Enable Home Assistant integration
HA_ENABLED=true
HA_INTEGRATION_ENABLED=false

# Home Assistant configuration
HA_URL=http://192.168.1.155:8123
HA_TOKEN=your-long-lived-access-token-here

# Home Assistant notification service
HA_NOTIFICATION_SERVICE=notify.mobile_app_your_phone

# ============================================================================
# ALERTING THRESHOLDS AND RULES
# ============================================================================

# Alert timing configuration (seconds)
ALERT_WARNING_TIMEOUT=900
ALERT_CRITICAL_IMMEDIATE=true
ALERT_REPEAT_INTERVAL=1800

# Alert suppression (seconds) 
ALERT_SUPPRESSION_WINDOW=300
MAX_ALERTS_PER_HOUR=10

# Resource usage thresholds (percentage)
CPU_WARNING_THRESHOLD=70
CPU_CRITICAL_THRESHOLD=85
MEMORY_WARNING_THRESHOLD=75
MEMORY_CRITICAL_THRESHOLD=90
DISK_WARNING_THRESHOLD=80
DISK_CRITICAL_THRESHOLD=95

# Performance thresholds
RESPONSE_TIME_WARNING=2000
RESPONSE_TIME_CRITICAL=5000
ERROR_RATE_WARNING=2
ERROR_RATE_CRITICAL=5

# ============================================================================
# EXTERNAL MONITORING INTEGRATIONS
# ============================================================================

# Prometheus integration
PROMETHEUS_ENABLED=false
PROMETHEUS_PORT=9090
PROMETHEUS_METRICS_PATH=/metrics

# Grafana integration
GRAFANA_ENABLED=false
GRAFANA_URL=http://localhost:3000
GRAFANA_API_KEY=your-grafana-api-key

# ============================================================================
# RECOVERY AND AUTOMATION
# ============================================================================

# Enable automated recovery
RECOVERY_ENABLED=true
RECOVERY_RESTART_THRESHOLD=5
RECOVERY_RESTART_WINDOW=300000
RECOVERY_MAX_RESTARTS=3

# ============================================================================
# ADVANCED CONFIGURATION
# ============================================================================

# Metrics collection
METRICS_COLLECTION_INTERVAL=15000
METRICS_RETENTION=604800000
METRICS_BUFFER_SIZE=1000
METRICS_FLUSH_INTERVAL=5000

# Health check intervals (milliseconds)
HEALTH_CHECK_INTERVAL=30000
HEALTH_MCP_CHECK_INTERVAL=60000
HEALTH_DB_CHECK_INTERVAL=30000
HEALTH_FS_CHECK_INTERVAL=300000

# Dashboard data retention (milliseconds)
DASHBOARD_DATA_RETENTION=86400000

# ============================================================================
# SECURITY CONFIGURATION
# ============================================================================

# API rate limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_WINDOW=900000
RATE_LIMIT_MAX_REQUESTS=1000

# CORS configuration
CORS_ENABLED=true
CORS_ORIGIN=*

# Authentication (for future use)
AUTH_ENABLED=false
JWT_SECRET=your-jwt-secret-here

# ============================================================================
# DEVELOPMENT CONFIGURATION
# ============================================================================

# Development-specific settings
DEV_AUTO_RELOAD=true
DEV_DEBUG_MODE=false
DEV_MOCK_EXTERNAL_SERVICES=false

# Testing configuration  
TEST_DATA_PATH=/tmp/wikijs-monitoring-test
TEST_DASHBOARD_PORT=3003
TEST_LOG_LEVEL=WARN

# ============================================================================
# HOMELAB-SPECIFIC CONFIGURATION
# ============================================================================

# Network configuration for homelab environment
HOMELAB_NETWORK=192.168.1.0/24
HOMELAB_GATEWAY=192.168.1.1
HOMELAB_DNS=192.168.1.1

# Container/VM configuration
CONTAINER_NAME=wikijs-monitoring
CONTAINER_MEMORY_LIMIT=512m
CONTAINER_CPU_LIMIT=0.5

# Backup configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION=7
BACKUP_DESTINATION=/backup/wikijs-monitoring

# ============================================================================
# TROUBLESHOOTING
# ============================================================================

# Debug settings
DEBUG_ENABLED=false
DEBUG_COMPONENTS=health-monitor,metrics-collector,alert-manager
DEBUG_LOG_REQUESTS=false
DEBUG_LOG_RESPONSES=false

# Verbose logging for troubleshooting
VERBOSE_LOGGING=false
LOG_SQL_QUERIES=false
LOG_HTTP_REQUESTS=false
LOG_WEBSOCKET_EVENTS=false

# Performance monitoring
PERFORMANCE_MONITORING=false
MEMORY_LEAK_DETECTION=false
CPU_PROFILING=false

# ============================================================================
# EXAMPLE CONFIGURATIONS FOR DIFFERENT ENVIRONMENTS
# ============================================================================

# Development Environment Example:
# NODE_ENV=development
# LOG_LEVEL=DEBUG
# DASHBOARD_PORT=3002
# EMAIL_ENABLED=false
# SLACK_ENABLED=false
# HA_ENABLED=false

# Production Environment Example:
# NODE_ENV=production
# LOG_LEVEL=INFO
# EMAIL_ENABLED=true
# SLACK_ENABLED=true
# HA_ENABLED=true
# PROMETHEUS_ENABLED=true
# GRAFANA_ENABLED=true

# Testing Environment Example:
# NODE_ENV=test
# LOG_LEVEL=WARN
# DASHBOARD_PORT=3003
# EMAIL_ENABLED=false
# SLACK_ENABLED=false
# RECOVERY_ENABLED=false