{"version":3,"names":["cov_x490koyeg","actualCoverage","crypto","s","require","rateLimit","helmet","Security","constructor","config","b","f","tokenCache","Map","ipWhitelist","Set","security","blockedIPs","suspiciousActivity","maxFailedAttempts","blockDuration","tokenExpiry","setupCleanupInterval","cleanupInterval","setInterval","cleanupExpiredTokens","cleanupBlockedIPs","createRateLimiter","options","defaultOptions","windowMs","max","standardHeaders","legacyHeaders","message","error","retryAfter","Math","ceil","skip","req","isIPWhitelisted","ip","onLimitReached","recordSuspiciousActivity","createStrictRateLimiter","createWebhookRateLimiter","getHelmetConfiguration","contentSecurityPolicy","directives","defaultSrc","styleSrc","scriptSrc","imgSrc","connectSrc","fontSrc","objectSrc","mediaSrc","frameSrc","crossOriginEmbedderPolicy","hsts","maxAge","includeSubDomains","preload","noSniff","xssFilter","referrerPolicy","policy","validateWebhookSignature","signature","payload","secret","Error","startsWith","expectedSignature","calculateHMAC","providedSignature","replace","timingSafeEqual","Buffer","from","hmac","createHmac","update","JSON","stringify","digest","generateSecureToken","expiresIn","tokenId","randomUUID","now","Date","expiry","token","id","createdAt","expiresAt","set","validateToken","get","delete","revokeToken","cleanedCount","console","log","has","isIPBlocked","blockInfo","until","blockIP","duration","oldBlocked","forEach","blockedIP","reason","toISOString","unblockIP","unblocked","activity","metadata","activities","push","timestamp","oneHourAgo","recentActivities","filter","a","length","getSuspiciousActivity","createSecurityMiddleware","res","next","connection","remoteAddress","status","json","securityContext","userAgent","isWhitelisted","createWebhookSecurityMiddleware","event","delivery","isValid","body","webhookContext","validated","sanitizeInput","input","trim","validateOrigin","origin","allowedOrigins","some","allowed","domain","slice","endsWith","generateCSRFToken","randomBytes","toString","validateCSRFToken","sessionToken","getSecurityHeaders","getSecurityStats","whitelistedIPs","size","activeTokens","suspiciousActivityEntries","cleanup","clearInterval","clear","module","exports"],"sources":["security.js"],"sourcesContent":["const crypto = require('crypto');\nconst rateLimit = require('express-rate-limit');\nconst helmet = require('helmet');\n\nclass Security {\n  constructor(config = {}) {\n    this.config = config;\n    this.tokenCache = new Map();\n    this.ipWhitelist = new Set(config.security?.ipWhitelist || []);\n    this.blockedIPs = new Set();\n    this.suspiciousActivity = new Map();\n    \n    // Security configuration\n    this.maxFailedAttempts = config.security?.maxFailedAttempts || 5;\n    this.blockDuration = config.security?.blockDuration || 300000; // 5 minutes\n    this.tokenExpiry = config.security?.tokenExpiry || 3600000; // 1 hour\n    \n    this.setupCleanupInterval();\n  }\n\n  setupCleanupInterval() {\n    // Clean up expired tokens and unblock IPs every 5 minutes\n    this.cleanupInterval = setInterval(() => {\n      this.cleanupExpiredTokens();\n      this.cleanupBlockedIPs();\n    }, 300000);\n  }\n\n  createRateLimiter(options = {}) {\n    const defaultOptions = {\n      windowMs: 15 * 60 * 1000, // 15 minutes\n      max: 100, // limit each IP to 100 requests per windowMs\n      standardHeaders: true,\n      legacyHeaders: false,\n      message: {\n        error: 'Too many requests from this IP, please try again later.',\n        retryAfter: Math.ceil(15 * 60 * 1000 / 1000)\n      },\n      skip: (req) => {\n        // Skip rate limiting for whitelisted IPs\n        return this.isIPWhitelisted(req.ip);\n      },\n      onLimitReached: (req) => {\n        this.recordSuspiciousActivity(req.ip, 'rate_limit_exceeded');\n      }\n    };\n\n    return rateLimit({ ...defaultOptions, ...options });\n  }\n\n  createStrictRateLimiter() {\n    return this.createRateLimiter({\n      windowMs: 5 * 60 * 1000, // 5 minutes\n      max: 10, // very strict limit\n      message: {\n        error: 'API rate limit exceeded. This endpoint has strict limits.',\n        retryAfter: 300\n      }\n    });\n  }\n\n  createWebhookRateLimiter() {\n    return this.createRateLimiter({\n      windowMs: 1 * 60 * 1000, // 1 minute\n      max: 30, // Allow burst webhook activity\n      message: {\n        error: 'Webhook rate limit exceeded.',\n        retryAfter: 60\n      }\n    });\n  }\n\n  getHelmetConfiguration() {\n    return helmet({\n      contentSecurityPolicy: {\n        directives: {\n          defaultSrc: [\"'self'\"],\n          styleSrc: [\"'self'\", \"'unsafe-inline'\"],\n          scriptSrc: [\"'self'\"],\n          imgSrc: [\"'self'\", \"data:\", \"https:\"],\n          connectSrc: [\"'self'\"],\n          fontSrc: [\"'self'\"],\n          objectSrc: [\"'none'\"],\n          mediaSrc: [\"'self'\"],\n          frameSrc: [\"'none'\"]\n        }\n      },\n      crossOriginEmbedderPolicy: false,\n      hsts: {\n        maxAge: 31536000,\n        includeSubDomains: true,\n        preload: true\n      },\n      noSniff: true,\n      xssFilter: true,\n      referrerPolicy: {\n        policy: \"strict-origin-when-cross-origin\"\n      }\n    });\n  }\n\n  validateWebhookSignature(signature, payload, secret) {\n    if (!signature || !secret) {\n      throw new Error('Missing signature or secret');\n    }\n\n    if (!signature.startsWith('sha256=')) {\n      throw new Error('Invalid signature format');\n    }\n\n    const expectedSignature = this.calculateHMAC(payload, secret);\n    const providedSignature = signature.replace('sha256=', '');\n\n    try {\n      return crypto.timingSafeEqual(\n        Buffer.from(expectedSignature, 'hex'),\n        Buffer.from(providedSignature, 'hex')\n      );\n    } catch (error) {\n      return false;\n    }\n  }\n\n  calculateHMAC(payload, secret) {\n    const hmac = crypto.createHmac('sha256', secret);\n    hmac.update(JSON.stringify(payload), 'utf8');\n    return hmac.digest('hex');\n  }\n\n  generateSecureToken(payload = {}, expiresIn = null) {\n    const tokenId = crypto.randomUUID();\n    const now = Date.now();\n    const expiry = expiresIn ? now + expiresIn : now + this.tokenExpiry;\n    \n    const token = {\n      id: tokenId,\n      payload,\n      createdAt: now,\n      expiresAt: expiry\n    };\n    \n    this.tokenCache.set(tokenId, token);\n    \n    return tokenId;\n  }\n\n  validateToken(tokenId) {\n    const token = this.tokenCache.get(tokenId);\n    \n    if (!token) {\n      throw new Error('Invalid token');\n    }\n    \n    if (Date.now() > token.expiresAt) {\n      this.tokenCache.delete(tokenId);\n      throw new Error('Token expired');\n    }\n    \n    return token;\n  }\n\n  revokeToken(tokenId) {\n    return this.tokenCache.delete(tokenId);\n  }\n\n  cleanupExpiredTokens() {\n    const now = Date.now();\n    let cleanedCount = 0;\n    \n    for (const [tokenId, token] of this.tokenCache) {\n      if (now > token.expiresAt) {\n        this.tokenCache.delete(tokenId);\n        cleanedCount++;\n      }\n    }\n    \n    if (cleanedCount > 0) {\n      console.log(`Cleaned up ${cleanedCount} expired tokens`);\n    }\n  }\n\n  isIPWhitelisted(ip) {\n    return this.ipWhitelist.has(ip);\n  }\n\n  isIPBlocked(ip) {\n    const blockInfo = this.blockedIPs.get ? this.blockedIPs.get(ip) : this.blockedIPs.has(ip);\n    \n    if (!blockInfo) return false;\n    \n    // If blockedIPs is a Map (with expiry), check if block has expired\n    if (this.blockedIPs.get) {\n      return Date.now() < blockInfo.until;\n    }\n    \n    // If blockedIPs is a Set (permanent blocks)\n    return true;\n  }\n\n  blockIP(ip, duration = null) {\n    const blockDuration = duration || this.blockDuration;\n    const until = Date.now() + blockDuration;\n    \n    if (!this.blockedIPs.set) {\n      // Convert Set to Map if needed\n      const oldBlocked = [...this.blockedIPs];\n      this.blockedIPs = new Map();\n      oldBlocked.forEach(blockedIP => {\n        this.blockedIPs.set(blockedIP, { until: Date.now() + this.blockDuration });\n      });\n    }\n    \n    this.blockedIPs.set(ip, { until, reason: 'security_violation' });\n    \n    console.log(`Blocked IP ${ip} until ${new Date(until).toISOString()}`);\n  }\n\n  unblockIP(ip) {\n    if (this.blockedIPs.delete) {\n      return this.blockedIPs.delete(ip);\n    } else {\n      this.blockedIPs.delete(ip);\n      return true;\n    }\n  }\n\n  cleanupBlockedIPs() {\n    if (!this.blockedIPs.forEach) return; // Not a Map\n    \n    const now = Date.now();\n    let unblocked = 0;\n    \n    for (const [ip, blockInfo] of this.blockedIPs) {\n      if (now >= blockInfo.until) {\n        this.blockedIPs.delete(ip);\n        unblocked++;\n      }\n    }\n    \n    if (unblocked > 0) {\n      console.log(`Unblocked ${unblocked} IPs`);\n    }\n  }\n\n  recordSuspiciousActivity(ip, activity, metadata = {}) {\n    if (!this.suspiciousActivity.has(ip)) {\n      this.suspiciousActivity.set(ip, []);\n    }\n    \n    const activities = this.suspiciousActivity.get(ip);\n    activities.push({\n      activity,\n      timestamp: Date.now(),\n      metadata\n    });\n    \n    // Keep only recent activities (last hour)\n    const oneHourAgo = Date.now() - 3600000;\n    const recentActivities = activities.filter(a => a.timestamp > oneHourAgo);\n    this.suspiciousActivity.set(ip, recentActivities);\n    \n    // Check if IP should be blocked\n    if (recentActivities.length >= this.maxFailedAttempts) {\n      this.blockIP(ip);\n      console.log(`IP ${ip} blocked due to suspicious activity: ${activity}`);\n    }\n  }\n\n  getSuspiciousActivity(ip) {\n    return this.suspiciousActivity.get(ip) || [];\n  }\n\n  createSecurityMiddleware() {\n    return (req, res, next) => {\n      const ip = req.ip || req.connection.remoteAddress;\n      \n      // Check if IP is blocked\n      if (this.isIPBlocked(ip)) {\n        this.recordSuspiciousActivity(ip, 'blocked_ip_access_attempt');\n        return res.status(403).json({\n          error: 'Access denied',\n          reason: 'IP blocked due to security violations',\n          timestamp: new Date().toISOString()\n        });\n      }\n      \n      // Add security headers\n      res.set({\n        'X-Content-Type-Options': 'nosniff',\n        'X-Frame-Options': 'DENY',\n        'X-XSS-Protection': '1; mode=block',\n        'Strict-Transport-Security': 'max-age=31536000; includeSubDomains',\n        'Referrer-Policy': 'strict-origin-when-cross-origin'\n      });\n      \n      // Track request for security monitoring\n      req.securityContext = {\n        ip,\n        timestamp: Date.now(),\n        userAgent: req.get('User-Agent'),\n        isWhitelisted: this.isIPWhitelisted(ip)\n      };\n      \n      next();\n    };\n  }\n\n  createWebhookSecurityMiddleware(secret) {\n    return (req, res, next) => {\n      const signature = req.get('X-Hub-Signature-256');\n      const event = req.get('X-GitHub-Event');\n      const delivery = req.get('X-GitHub-Delivery');\n      \n      // Basic validation\n      if (!signature || !event || !delivery) {\n        this.recordSuspiciousActivity(req.ip, 'incomplete_webhook_headers');\n        return res.status(400).json({\n          error: 'Missing required webhook headers',\n          timestamp: new Date().toISOString()\n        });\n      }\n      \n      // Validate signature\n      try {\n        const isValid = this.validateWebhookSignature(signature, req.body, secret);\n        \n        if (!isValid) {\n          this.recordSuspiciousActivity(req.ip, 'invalid_webhook_signature', {\n            event,\n            delivery\n          });\n          \n          return res.status(401).json({\n            error: 'Invalid webhook signature',\n            timestamp: new Date().toISOString()\n          });\n        }\n        \n        req.webhookContext = {\n          signature,\n          event,\n          delivery,\n          validated: true\n        };\n        \n        next();\n        \n      } catch (error) {\n        this.recordSuspiciousActivity(req.ip, 'webhook_validation_error', {\n          error: error.message\n        });\n        \n        return res.status(400).json({\n          error: 'Webhook validation failed',\n          timestamp: new Date().toISOString()\n        });\n      }\n    };\n  }\n\n  sanitizeInput(input) {\n    if (typeof input !== 'string') {\n      return input;\n    }\n    \n    // Remove potentially dangerous characters\n    return input\n      .replace(/[<>\\\"']/g, '') // Basic XSS prevention\n      .replace(/[;&|`$]/g, '') // Command injection prevention\n      .trim();\n  }\n\n  validateOrigin(origin, allowedOrigins) {\n    if (!origin) return false;\n    if (!allowedOrigins || allowedOrigins.length === 0) return true;\n    \n    return allowedOrigins.some(allowed => {\n      if (allowed === '*') return true;\n      if (allowed.startsWith('*.')) {\n        const domain = allowed.slice(2);\n        return origin.endsWith(domain);\n      }\n      return origin === allowed;\n    });\n  }\n\n  generateCSRFToken() {\n    return crypto.randomBytes(32).toString('hex');\n  }\n\n  validateCSRFToken(token, sessionToken) {\n    if (!token || !sessionToken) return false;\n    \n    try {\n      return crypto.timingSafeEqual(\n        Buffer.from(token, 'hex'),\n        Buffer.from(sessionToken, 'hex')\n      );\n    } catch (error) {\n      return false;\n    }\n  }\n\n  getSecurityHeaders() {\n    return {\n      'X-Content-Type-Options': 'nosniff',\n      'X-Frame-Options': 'DENY',\n      'X-XSS-Protection': '1; mode=block',\n      'Strict-Transport-Security': 'max-age=31536000; includeSubDomains; preload',\n      'Referrer-Policy': 'strict-origin-when-cross-origin',\n      'Permissions-Policy': 'geolocation=(), microphone=(), camera=()',\n      'Cache-Control': 'no-store, no-cache, must-revalidate, proxy-revalidate',\n      'Pragma': 'no-cache',\n      'Expires': '0'\n    };\n  }\n\n  getSecurityStats() {\n    return {\n      whitelistedIPs: this.ipWhitelist.size,\n      blockedIPs: this.blockedIPs.size,\n      activeTokens: this.tokenCache.size,\n      suspiciousActivityEntries: this.suspiciousActivity.size,\n      maxFailedAttempts: this.maxFailedAttempts,\n      blockDuration: this.blockDuration,\n      tokenExpiry: this.tokenExpiry\n    };\n  }\n\n  cleanup() {\n    if (this.cleanupInterval) {\n      clearInterval(this.cleanupInterval);\n      this.cleanupInterval = null;\n    }\n    \n    this.tokenCache.clear();\n    this.blockedIPs.clear();\n    this.suspiciousActivity.clear();\n    \n    console.log('Security service cleaned up');\n  }\n}\n\nmodule.exports = Security;"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}