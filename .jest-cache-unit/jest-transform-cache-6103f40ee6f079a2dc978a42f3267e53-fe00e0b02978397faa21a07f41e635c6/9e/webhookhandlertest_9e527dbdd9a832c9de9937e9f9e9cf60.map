{"version":3,"names":["crypto","require","WebhookHandler","constructor","options","secret","logger","deployer","allowedOrigins","rateLimit","windowMs","maxRequests","requestHistory","Map","handleWebhook","payload","headers","rateLimitResult","checkRateLimit","allowed","success","error","retryAfter","signatureValidation","validateSignature","valid","details","originValidation","validateOrigin","result","processWebhookEvent","eventType","processed","deploymentTriggered","deploymentId","message","stack","signature","startsWith","expectedSignature","createHmac","update","JSON","stringify","digest","isValid","timingSafeEqual","Buffer","from","userAgent","isAllowed","some","origin","toLowerCase","includes","clientId","now","Date","windowStart","has","set","requests","get","recentRequests","filter","timestamp","length","Math","ceil","currentRequests","push","remaining","determineEventType","handlePushEvent","handlePullRequestEvent","zen","commits","pull_request","action","isMainBranch","ref","hasConfigChanges","commit","modified","file","endsWith","triggerDeployment","source","repository","full_name","branch","replace","pusher","name","targetBranch","base","prNumber","number","getMetrics","totalRequests","Array","values","reduce","sum","uniqueClients","size","averageRequestsPerClient","round","describe","webhookHandler","mockDeployer","mockLogger","beforeEach","jest","fn","info","warn","afterEach","clearAllMocks","it","test","expect","toBe","toBeNull","invalidSignature","toContain","i","toBeGreaterThan","originalNow","mockResolvedValue","toHaveBeenCalledWith","not","toHaveBeenCalled","unknown","mockRejectedValue","Error","metrics"],"sources":["webhook-handler.test.js"],"sourcesContent":["/**\n * Unit tests for Webhook Handler\n * Tests webhook processing, validation, and security\n */\n\nconst crypto = require('crypto');\n\n// Mock webhook handler implementation\nclass WebhookHandler {\n  constructor(options = {}) {\n    this.secret = options.secret || 'default-webhook-secret';\n    this.logger = options.logger;\n    this.deployer = options.deployer;\n    this.allowedOrigins = options.allowedOrigins || ['github.com'];\n    this.rateLimit = options.rateLimit || {\n      windowMs: 60000, // 1 minute\n      maxRequests: 10\n    };\n    this.requestHistory = new Map();\n  }\n\n  async handleWebhook(payload, headers) {\n    try {\n      // Rate limiting\n      const rateLimitResult = this.checkRateLimit(headers['x-forwarded-for'] || 'unknown');\n      if (!rateLimitResult.allowed) {\n        return {\n          success: false,\n          error: 'Rate limit exceeded',\n          retryAfter: rateLimitResult.retryAfter\n        };\n      }\n\n      // Validate signature\n      const signatureValidation = this.validateSignature(payload, headers['x-hub-signature-256']);\n      if (!signatureValidation.valid) {\n        return {\n          success: false,\n          error: 'Invalid signature',\n          details: signatureValidation.error\n        };\n      }\n\n      // Validate origin\n      const originValidation = this.validateOrigin(headers['user-agent']);\n      if (!originValidation.valid) {\n        return {\n          success: false,\n          error: 'Invalid origin',\n          details: originValidation.error\n        };\n      }\n\n      // Process webhook event\n      const result = await this.processWebhookEvent(payload);\n      \n      return {\n        success: true,\n        eventType: result.eventType,\n        processed: result.processed,\n        deploymentTriggered: result.deploymentTriggered || false,\n        deploymentId: result.deploymentId\n      };\n\n    } catch (error) {\n      this.logger?.error('Webhook processing error', {\n        error: error.message,\n        stack: error.stack\n      });\n\n      return {\n        success: false,\n        error: 'Internal processing error',\n        details: error.message\n      };\n    }\n  }\n\n  validateSignature(payload, signature) {\n    if (!signature) {\n      return { valid: false, error: 'Missing signature header' };\n    }\n\n    if (!signature.startsWith('sha256=')) {\n      return { valid: false, error: 'Invalid signature format' };\n    }\n\n    const expectedSignature = 'sha256=' + crypto\n      .createHmac('sha256', this.secret)\n      .update(JSON.stringify(payload))\n      .digest('hex');\n\n    try {\n      const isValid = crypto.timingSafeEqual(\n        Buffer.from(signature),\n        Buffer.from(expectedSignature)\n      );\n\n      return {\n        valid: isValid,\n        error: isValid ? null : 'Signature mismatch'\n      };\n    } catch (error) {\n      return { valid: false, error: 'Signature validation failed' };\n    }\n  }\n\n  validateOrigin(userAgent) {\n    if (!userAgent) {\n      return { valid: false, error: 'Missing user agent' };\n    }\n\n    const isAllowed = this.allowedOrigins.some(origin => \n      userAgent.toLowerCase().includes(origin.toLowerCase())\n    );\n\n    return {\n      valid: isAllowed,\n      error: isAllowed ? null : 'Origin not allowed'\n    };\n  }\n\n  checkRateLimit(clientId) {\n    const now = Date.now();\n    const windowStart = now - this.rateLimit.windowMs;\n\n    if (!this.requestHistory.has(clientId)) {\n      this.requestHistory.set(clientId, []);\n    }\n\n    const requests = this.requestHistory.get(clientId);\n    \n    // Remove old requests outside the window\n    const recentRequests = requests.filter(timestamp => timestamp > windowStart);\n    this.requestHistory.set(clientId, recentRequests);\n\n    if (recentRequests.length >= this.rateLimit.maxRequests) {\n      const retryAfter = Math.ceil((recentRequests[0] + this.rateLimit.windowMs - now) / 1000);\n      return {\n        allowed: false,\n        retryAfter,\n        currentRequests: recentRequests.length\n      };\n    }\n\n    // Add current request\n    recentRequests.push(now);\n    this.requestHistory.set(clientId, recentRequests);\n\n    return {\n      allowed: true,\n      currentRequests: recentRequests.length,\n      remaining: this.rateLimit.maxRequests - recentRequests.length\n    };\n  }\n\n  async processWebhookEvent(payload) {\n    const eventType = this.determineEventType(payload);\n    \n    switch (eventType) {\n      case 'push':\n        return await this.handlePushEvent(payload);\n      case 'pull_request':\n        return await this.handlePullRequestEvent(payload);\n      case 'ping':\n        return { eventType, processed: true, message: 'Ping received' };\n      default:\n        return { eventType, processed: false, message: 'Event type not supported' };\n    }\n  }\n\n  determineEventType(payload) {\n    if (payload.zen) return 'ping';\n    if (payload.commits) return 'push';\n    if (payload.pull_request) return 'pull_request';\n    if (payload.action) return payload.action;\n    return 'unknown';\n  }\n\n  async handlePushEvent(payload) {\n    // Check if push is to main/master branch\n    const isMainBranch = payload.ref === 'refs/heads/main' || payload.ref === 'refs/heads/master';\n    \n    if (!isMainBranch) {\n      return {\n        eventType: 'push',\n        processed: true,\n        deploymentTriggered: false,\n        message: 'Push not to main branch, no deployment triggered'\n      };\n    }\n\n    // Check if commits contain configuration changes\n    const hasConfigChanges = payload.commits?.some(commit => \n      commit.modified?.some(file => \n        file.endsWith('.yaml') || file.endsWith('.yml') || file.includes('config')\n      )\n    );\n\n    if (!hasConfigChanges) {\n      return {\n        eventType: 'push',\n        processed: true,\n        deploymentTriggered: false,\n        message: 'No configuration changes detected'\n      };\n    }\n\n    // Trigger deployment\n    if (this.deployer) {\n      try {\n        const deploymentId = await this.deployer.triggerDeployment({\n          source: 'webhook',\n          repository: payload.repository?.full_name,\n          branch: payload.ref?.replace('refs/heads/', ''),\n          commits: payload.commits?.length || 0,\n          pusher: payload.pusher?.name\n        });\n\n        return {\n          eventType: 'push',\n          processed: true,\n          deploymentTriggered: true,\n          deploymentId,\n          message: 'Deployment triggered successfully'\n        };\n      } catch (error) {\n        return {\n          eventType: 'push',\n          processed: false,\n          deploymentTriggered: false,\n          error: error.message\n        };\n      }\n    }\n\n    return {\n      eventType: 'push',\n      processed: true,\n      deploymentTriggered: false,\n      message: 'No deployer configured'\n    };\n  }\n\n  async handlePullRequestEvent(payload) {\n    const action = payload.action;\n    const targetBranch = payload.pull_request?.base?.ref;\n\n    if (action === 'opened' && targetBranch === 'main') {\n      return {\n        eventType: 'pull_request',\n        processed: true,\n        message: 'Pull request opened to main branch',\n        prNumber: payload.pull_request?.number\n      };\n    }\n\n    return {\n      eventType: 'pull_request',\n      processed: true,\n      message: `Pull request ${action}, no action required`\n    };\n  }\n\n  getMetrics() {\n    const totalRequests = Array.from(this.requestHistory.values())\n      .reduce((sum, requests) => sum + requests.length, 0);\n\n    return {\n      totalRequests,\n      uniqueClients: this.requestHistory.size,\n      averageRequestsPerClient: this.requestHistory.size > 0 \n        ? Math.round(totalRequests / this.requestHistory.size) \n        : 0\n    };\n  }\n}\n\ndescribe('WebhookHandler', () => {\n  let webhookHandler;\n  let mockDeployer;\n  let mockLogger;\n\n  beforeEach(() => {\n    mockDeployer = {\n      triggerDeployment: jest.fn()\n    };\n\n    mockLogger = {\n      info: jest.fn(),\n      error: jest.fn(),\n      warn: jest.fn()\n    };\n\n    webhookHandler = new WebhookHandler({\n      secret: 'test-webhook-secret',\n      deployer: mockDeployer,\n      logger: mockLogger\n    });\n  });\n\n  afterEach(() => {\n    jest.clearAllMocks();\n  });\n\n  describe('signature validation', () => {\n    it('should validate correct webhook signatures', () => {\n      const payload = { test: 'data' };\n      const signature = 'sha256=' + crypto\n        .createHmac('sha256', 'test-webhook-secret')\n        .update(JSON.stringify(payload))\n        .digest('hex');\n\n      const result = webhookHandler.validateSignature(payload, signature);\n\n      expect(result.valid).toBe(true);\n      expect(result.error).toBeNull();\n    });\n\n    it('should reject invalid signatures', () => {\n      const payload = { test: 'data' };\n      const invalidSignature = 'sha256=invalid';\n\n      const result = webhookHandler.validateSignature(payload, invalidSignature);\n\n      expect(result.valid).toBe(false);\n      expect(result.error).toContain('Signature mismatch');\n    });\n\n    it('should require signature header', () => {\n      const result = webhookHandler.validateSignature({}, null);\n\n      expect(result.valid).toBe(false);\n      expect(result.error).toContain('Missing signature header');\n    });\n\n    it('should require proper signature format', () => {\n      const result = webhookHandler.validateSignature({}, 'invalid-format');\n\n      expect(result.valid).toBe(false);\n      expect(result.error).toContain('Invalid signature format');\n    });\n  });\n\n  describe('origin validation', () => {\n    it('should validate allowed origins', () => {\n      const result = webhookHandler.validateOrigin('GitHub-Hookshot/abc123');\n\n      expect(result.valid).toBe(true);\n      expect(result.error).toBeNull();\n    });\n\n    it('should reject disallowed origins', () => {\n      const result = webhookHandler.validateOrigin('MaliciousBot/1.0');\n\n      expect(result.valid).toBe(false);\n      expect(result.error).toContain('Origin not allowed');\n    });\n\n    it('should require user agent', () => {\n      const result = webhookHandler.validateOrigin(null);\n\n      expect(result.valid).toBe(false);\n      expect(result.error).toContain('Missing user agent');\n    });\n  });\n\n  describe('rate limiting', () => {\n    it('should allow requests under rate limit', () => {\n      const result = webhookHandler.checkRateLimit('client1');\n\n      expect(result.allowed).toBe(true);\n      expect(result.currentRequests).toBe(1);\n      expect(result.remaining).toBe(9);\n    });\n\n    it('should block requests over rate limit', () => {\n      // Make maximum allowed requests\n      for (let i = 0; i < 10; i++) {\n        webhookHandler.checkRateLimit('client1');\n      }\n\n      const result = webhookHandler.checkRateLimit('client1');\n\n      expect(result.allowed).toBe(false);\n      expect(result.retryAfter).toBeGreaterThan(0);\n      expect(result.currentRequests).toBe(10);\n    });\n\n    it('should track separate clients independently', () => {\n      // Max out client1\n      for (let i = 0; i < 10; i++) {\n        webhookHandler.checkRateLimit('client1');\n      }\n\n      // Client2 should still be allowed\n      const result = webhookHandler.checkRateLimit('client2');\n\n      expect(result.allowed).toBe(true);\n      expect(result.currentRequests).toBe(1);\n    });\n\n    it('should reset rate limit after time window', () => {\n      // Max out requests\n      for (let i = 0; i < 10; i++) {\n        webhookHandler.checkRateLimit('client1');\n      }\n\n      // Block should be active\n      expect(webhookHandler.checkRateLimit('client1').allowed).toBe(false);\n\n      // Mock time advancement\n      const originalNow = Date.now;\n      Date.now = jest.fn(() => originalNow() + 61000); // 61 seconds later\n\n      // Should be allowed again\n      const result = webhookHandler.checkRateLimit('client1');\n      expect(result.allowed).toBe(true);\n\n      // Restore Date.now\n      Date.now = originalNow;\n    });\n  });\n\n  describe('event processing', () => {\n    it('should handle ping events', async () => {\n      const payload = { zen: 'Hello from GitHub!' };\n      \n      const result = await webhookHandler.processWebhookEvent(payload);\n\n      expect(result.eventType).toBe('ping');\n      expect(result.processed).toBe(true);\n      expect(result.message).toContain('Ping received');\n    });\n\n    it('should handle push events to main branch with config changes', async () => {\n      mockDeployer.triggerDeployment.mockResolvedValue('deploy-20250713-101117');\n\n      const payload = {\n        ref: 'refs/heads/main',\n        commits: [\n          {\n            modified: ['configuration.yaml', 'automations.yaml']\n          }\n        ],\n        repository: { full_name: 'user/repo' },\n        pusher: { name: 'testuser' }\n      };\n\n      const result = await webhookHandler.processWebhookEvent(payload);\n\n      expect(result.eventType).toBe('push');\n      expect(result.processed).toBe(true);\n      expect(result.deploymentTriggered).toBe(true);\n      expect(result.deploymentId).toBe('deploy-20250713-101117');\n      expect(mockDeployer.triggerDeployment).toHaveBeenCalledWith({\n        source: 'webhook',\n        repository: 'user/repo',\n        branch: 'main',\n        commits: 1,\n        pusher: 'testuser'\n      });\n    });\n\n    it('should not trigger deployment for non-main branch pushes', async () => {\n      const payload = {\n        ref: 'refs/heads/feature-branch',\n        commits: [{ modified: ['configuration.yaml'] }]\n      };\n\n      const result = await webhookHandler.processWebhookEvent(payload);\n\n      expect(result.eventType).toBe('push');\n      expect(result.processed).toBe(true);\n      expect(result.deploymentTriggered).toBe(false);\n      expect(result.message).toContain('not to main branch');\n      expect(mockDeployer.triggerDeployment).not.toHaveBeenCalled();\n    });\n\n    it('should not trigger deployment without config changes', async () => {\n      const payload = {\n        ref: 'refs/heads/main',\n        commits: [\n          {\n            modified: ['README.md', 'docs/usage.md']\n          }\n        ]\n      };\n\n      const result = await webhookHandler.processWebhookEvent(payload);\n\n      expect(result.eventType).toBe('push');\n      expect(result.processed).toBe(true);\n      expect(result.deploymentTriggered).toBe(false);\n      expect(result.message).toContain('No configuration changes');\n      expect(mockDeployer.triggerDeployment).not.toHaveBeenCalled();\n    });\n\n    it('should handle pull request events', async () => {\n      const payload = {\n        action: 'opened',\n        pull_request: {\n          number: 123,\n          base: { ref: 'main' }\n        }\n      };\n\n      const result = await webhookHandler.processWebhookEvent(payload);\n\n      expect(result.eventType).toBe('pull_request');\n      expect(result.processed).toBe(true);\n      expect(result.prNumber).toBe(123);\n      expect(result.message).toContain('Pull request opened');\n    });\n\n    it('should handle unknown event types', async () => {\n      const payload = { unknown: 'event' };\n\n      const result = await webhookHandler.processWebhookEvent(payload);\n\n      expect(result.eventType).toBe('unknown');\n      expect(result.processed).toBe(false);\n      expect(result.message).toContain('not supported');\n    });\n  });\n\n  describe('complete webhook handling', () => {\n    it('should process valid webhook successfully', async () => {\n      mockDeployer.triggerDeployment.mockResolvedValue('deploy-20250713-101117');\n\n      const payload = {\n        ref: 'refs/heads/main',\n        commits: [{ modified: ['configuration.yaml'] }],\n        repository: { full_name: 'user/repo' }\n      };\n\n      const signature = 'sha256=' + crypto\n        .createHmac('sha256', 'test-webhook-secret')\n        .update(JSON.stringify(payload))\n        .digest('hex');\n\n      const headers = {\n        'x-hub-signature-256': signature,\n        'user-agent': 'GitHub-Hookshot/abc123',\n        'x-forwarded-for': '192.168.1.100'\n      };\n\n      const result = await webhookHandler.handleWebhook(payload, headers);\n\n      expect(result.success).toBe(true);\n      expect(result.eventType).toBe('push');\n      expect(result.deploymentTriggered).toBe(true);\n      expect(result.deploymentId).toBe('deploy-20250713-101117');\n    });\n\n    it('should reject webhook with invalid signature', async () => {\n      const payload = { test: 'data' };\n      const headers = {\n        'x-hub-signature-256': 'sha256=invalid',\n        'user-agent': 'GitHub-Hookshot/abc123'\n      };\n\n      const result = await webhookHandler.handleWebhook(payload, headers);\n\n      expect(result.success).toBe(false);\n      expect(result.error).toContain('Invalid signature');\n    });\n\n    it('should reject webhook from disallowed origin', async () => {\n      const payload = { test: 'data' };\n      const signature = 'sha256=' + crypto\n        .createHmac('sha256', 'test-webhook-secret')\n        .update(JSON.stringify(payload))\n        .digest('hex');\n\n      const headers = {\n        'x-hub-signature-256': signature,\n        'user-agent': 'MaliciousBot/1.0'\n      };\n\n      const result = await webhookHandler.handleWebhook(payload, headers);\n\n      expect(result.success).toBe(false);\n      expect(result.error).toContain('Invalid origin');\n    });\n\n    it('should reject webhook when rate limited', async () => {\n      const payload = { test: 'data' };\n      const signature = 'sha256=' + crypto\n        .createHmac('sha256', 'test-webhook-secret')\n        .update(JSON.stringify(payload))\n        .digest('hex');\n\n      const headers = {\n        'x-hub-signature-256': signature,\n        'user-agent': 'GitHub-Hookshot/abc123',\n        'x-forwarded-for': '192.168.1.100'\n      };\n\n      // Max out rate limit\n      for (let i = 0; i < 10; i++) {\n        await webhookHandler.handleWebhook(payload, headers);\n      }\n\n      const result = await webhookHandler.handleWebhook(payload, headers);\n\n      expect(result.success).toBe(false);\n      expect(result.error).toContain('Rate limit exceeded');\n      expect(result.retryAfter).toBeGreaterThan(0);\n    });\n\n    it('should handle processing errors gracefully', async () => {\n      mockDeployer.triggerDeployment.mockRejectedValue(new Error('Deployment failed'));\n\n      const payload = {\n        ref: 'refs/heads/main',\n        commits: [{ modified: ['configuration.yaml'] }]\n      };\n\n      const signature = 'sha256=' + crypto\n        .createHmac('sha256', 'test-webhook-secret')\n        .update(JSON.stringify(payload))\n        .digest('hex');\n\n      const headers = {\n        'x-hub-signature-256': signature,\n        'user-agent': 'GitHub-Hookshot/abc123'\n      };\n\n      const result = await webhookHandler.handleWebhook(payload, headers);\n\n      expect(result.success).toBe(false);\n      expect(result.error).toContain('Internal processing error');\n      expect(mockLogger.error).toHaveBeenCalled();\n    });\n  });\n\n  describe('metrics', () => {\n    it('should track request metrics', () => {\n      webhookHandler.checkRateLimit('client1');\n      webhookHandler.checkRateLimit('client1');\n      webhookHandler.checkRateLimit('client2');\n\n      const metrics = webhookHandler.getMetrics();\n\n      expect(metrics.totalRequests).toBe(3);\n      expect(metrics.uniqueClients).toBe(2);\n      expect(metrics.averageRequestsPerClient).toBe(2); // (2+1)/2 = 1.5, rounded to 2\n    });\n\n    it('should handle empty metrics', () => {\n      const metrics = webhookHandler.getMetrics();\n\n      expect(metrics.totalRequests).toBe(0);\n      expect(metrics.uniqueClients).toBe(0);\n      expect(metrics.averageRequestsPerClient).toBe(0);\n    });\n  });\n});"],"mappings":"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","ignoreList":[]}